<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="normalize.css">
    <style>
        .wrapper {
            background-color: #000;
            position: relative;
            width: 500px;
            height: 300px;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <canvas id="canvas"></canvas>
</div>
</body>
<script src="/assets/barrage.js"></script>
<script>
    let barrage = new window.Barrage.default({
      el: 'canvas'
    })
    // let arr = []
    // let time = 20
    // for (let i = 0; i < 100; i++) {
    //   arr.push({
    //     text: '123',
    //     time: time
    //   })
    //   time += 10
    // }
    // barrage.autoAddBarrage(arr)


    const socket = new WebSocket('ws://127.0.0.1:10102')
    socket.addEventListener('open', function (event) {
      socket.send('start')
    })
    socket.addEventListener('message', function (event) {
      let {data} = event
      console.log(data)
      barrage.addBarrage(JSON.parse(data))
    })
</script>
</html>